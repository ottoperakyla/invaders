{"version":3,"sources":["game.ts"],"names":[],"mappings":"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","file":"game.4fb5d41c.map","sourceRoot":"..","sourcesContent":["const canvas = document.querySelector('canvas')\nconst ctx = canvas.getContext('2d')\nconst canvasSize = canvas.width\nconst playerWidth = 100\nconst playerHeight = 20\nconst player = {\n  x: canvas.width / 2 - playerWidth / 2,\n  y: canvasSize - playerHeight * 2,\n  width: playerWidth,\n  height: playerHeight,\n  color: 'cyan',\n  moveSpeed: 50,\n  gun: {\n    size: 15,\n    color: '#ccc'\n  }\n}\nconst Barrier = x => ({\n  x,\n  y: canvasSize - playerHeight * 4,\n  width: playerWidth,\n  height: playerHeight,\n  color: 'green',\n  hp: 3\n})\nconst barriers = [Barrier(75), Barrier(325)]\n\nconst Bullet = (x, y, vy) => ({\n  x,\n  y,\n  vy,\n  width: 4,\n  height: 4,\n  color: 'white'\n})\nlet bullets = []\nlet bulletCooldown = false\n\nconst enemies = []\n\nconst renderPlayer = () => {\n  const {x, y, width, height, gun, color} = player\n  ctx.fillStyle = color\n  ctx.fillRect(x, y, width, height)\n  ctx.fillStyle = gun.color\n  ctx.fillRect(x + width / 2 - gun.size / 2, y - gun.size, gun.size, gun.size)\n}\n\nconst renderBarriers = () => {\n  for (let {x, y, width, height, color} of barriers) {\n    ctx.fillStyle = color\n    ctx.fillRect(x, y, width, height)\n  }\n}\n\nconst renderBullets = () => {\n  for (let i = 0; i < bullets.length; i++) {\n    const bullet = bullets[i]\n    const {x, y, width, height, vy, color} = bullet\n    ctx.fillStyle = color\n    ctx.fillRect(x, y, width, height)\n    bullet.y += vy\n    for (let j = 0; j < barriers.length; j++) {\n      const barrier = barriers[j]\n      const {x, y, width, height} = barrier\n      if (bullet.x > x && bullet.x < x + width && bullet.y < y + height) {\n        bullets.splice(i, i + 1)\n        barrier.hp--\n        switch (barrier.hp) {\n          case 2:\n            barrier.color = 'yellow'\n            break\n          case 1:\n            barrier.color = 'red'\n            break\n        }\n        if (barrier.hp === 0) {\n          barriers.splice(j, j+1)\n        }\n      }\n    }\n  }\n}\n\nconst render = () => {\n  ctx.clearRect(0, 0, canvasSize, canvasSize)\n  renderPlayer()\n  renderBarriers()\n  renderBullets()\n  requestAnimationFrame(render)\n}\n\nrequestAnimationFrame(render)\n\ndocument.addEventListener('keypress', ({key}) => {\n  switch(key) {\n    case 'a':\n      player.x = Math.max(0, player.x - player.moveSpeed)\n      break\n    case 'd':\n      player.x = Math.min(canvas.width - player.width, player.x + player.moveSpeed)\n      break\n    case 'l':\n      if (bulletCooldown) {\n        break\n      }\n      bulletCooldown = true\n      setTimeout(() => bulletCooldown = false, 1000)\n      bullets.push(Bullet(player.x + player.width / 2 - 2, player.y - player.height, -4))\n      break\n  }\n})"]}